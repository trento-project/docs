[[sec-trento-mcp-sles]]
:revdate: 2025-10-31
=== Integrating the {trento} MCP Server with SLES 16

This guide explains how to connect the {trento} MCP Server to {sles} 16 (SLES 16) using MCPHost, a lightweight CLI tool for the Model Context Protocol (MCP).

SLES 16 is designed for modern, AI-powered workloads and agentic applications. If you run SAP landscapes, {sles4sap} 16 builds on SLES 16 and pairs naturally with {trento} for intelligent, stable operations.

As the MCP ecosystem expands, more MCP hosts and integrations will be available for SLES and SLES for SAP, installable and updatable with `zypper`. This guide focuses on MCPHost for its simplicity and compatibility with remote MCP servers like {trento}.

==== Prerequisites

Before configuring your MCP Host, ensure you have:

* A SLES 16 system with network access
* An LLM provider and credentials:
** Public hosted options, such as Google Gemini, OpenAI, etc.
** Private/on-premises option, such as {suseai} Platform - See the guide on <<sec-trento-mcp-suse-ai>>.

* *A running {trserver} installation* with the {trento} MCP Server component enabled:
** Follow the <<sec-trento-installing-trentoserver>> to deploy {trserver} and enable the {trento} MCP Server.
** Note the {trento} MCP Server endpoint URL (e.g., `https://trento.example.com/mcp-server-trento/mcp`).

* *A {trento} API token (Personal Access Token)*:
** Log in to your {trento} web interface with your username and password
** Click on your username in the top-right corner and select *Profile*.
** Scroll down to the *Personal Access Tokens* section.
** Click the *Generate Token* button.
** Enter a descriptive name for the token (e.g., "VS Code MCP Client").
** Optionally configure an expiration date for the token, or select *Never Expires*.
** Click *Generate Token*.
** *Important:* Copy the generated token immediately and store it securely - it will not be shown again.

.Generate a Personal Access Token in {trento}
image::generate-pat.png[Generate a Personal Access Token in {trento},width=800]

==== Install MCPHost on SLES 16

MCPHost is available as a package on SLES 16 and can be installed using the standard SUSE package manager. This ensures you get a version tested for your platform, with automatic updates and dependency management.

To install MCPHost, open a terminal and run:

[source,console]
----
sudo zypper refresh
sudo zypper install mcphost
----

This will download and install the latest available version of MCPHost and any required dependencies.

After installation, verify that MCPHost is available and working by checking its version:

[source,console]
----
mcphost --version
----

If you see the version and copyright, MCPHost is installed correctly and ready for configuration.

==== Configure MCPHost

Refer to the official https://github.com/mark3labs/mcphost#installation[MCPHost documentation] for comprehensive configuration details. This section focuses on adding the {trento} MCP Server to your system.

MCPHost reads its configuration from several locations; one common location is `~/.mcphost.yml`. Create `~/.mcphost.yml` with the following content:

[source,yaml]
----
mcpServers:
  trento-mcp-server:
    type: "remote"
    url: https://trento.example.com/mcp-server-trento/mcp
    headers:
      - "Authorization: Bearer ${env://TRENTO_PAT}"
----

[NOTE]
====
**Security best practice:** Keep secrets out of configuration files. Store your keys in environment variables instead of hardcoding them.

Export your keys in the shell before running MCPHost:

[source,console]
----
export GOOGLE_API_KEY=<your-google-api-key>
export TRENTO_PAT=<your-trento-personal-access-token>
----
====

* Replace `https://trento.example.com/mcp-server-trento/mcp` with the actual URL where your {trento} MCP Server is accessible:
  ** For Kubernetes deployments with ingress, use the ingress URL (e.g., `https://trento.example.com/mcp-server-trento/mcp`).
  ** For local or development setups, use `http://localhost:5000/mcp` (adjust the port as needed).
  ** If using Server-Sent Events (SSE) transport instead of the default streamable transport, change the path from `/mcp` to `/sse` - The transport type is configured on the {trento} MCP Server using the `TRANSPORT` configuration key or `--transport` flag (see <<sec-trento-mcp-config>>).

* Replace `<your-trento-personal-access-token>` with the API token you generated from your {trento} instance.
* If you configured a custom header name (using `HEADER_NAME` or `--header-name`), update `Authorization` accordingly.

[TIP]
====
You can also configure remote LLM models directly in your MCPHost configuration. For example, to use Google Gemini as your model provider:

[source,yaml]
----
model: "google:gemini-2.5-pro"
provider-url: "https://generativelanguage.googleapis.com/v1beta/openai/"
provider-api-key: "${env://GOOGLE_API_KEY}"
----

This configuration uses the `GOOGLE_API_KEY` environment variable you exported earlier.
====

==== Run MCPHost and use {trento} Tools

[arabic]
. Start MCPHost:
+
[source,console]
----
mcphost
----
+
[TIP]
====
If no servers appear on startup, confirm your configuration file exists at `~/.mcphost.yml` (or another supported location listed in the MCPHost docs) and that your environment variables are exported in the same shell session.
====
. Verify the connection to {trento} and basic status:
+
[source,console]
----
/servers
----
+
.MCPHost initial screen with the {trento} MCP Server connected
image::mcphost-initial.png[MCPHost initial screen, width=900]
+
. Ask the model to invoke {trento} tools using natural language prompts, such as:
+
* "List all {sap} systems managed".
* "Show my HANA clusters".
* "Are my {sap} systems compliant?"
* "What is the health status of my {sap} landscape?"
* "Show me all hosts running {sap} applications".
* "Are there any critical alerts I need to address?"
* "Get details about the latest check execution results".
* "Which {sap} systems are currently running?"
+
.Example MCPHost session querying {trento} about SAP systems
image::example-mcphost.png[Example MCPHost session with {trento},width=900]

==== Troubleshooting

If you encounter issues connecting MCPHost to the {trento} MCP Server:

. *Connection Errors*
** Verify that the {trento} MCP Server URL in `~/.mcphost.yml` is correct and accessible from your SLES 16 system.
** Check if the {trento} MCP Server is running by reviewing logs from your {trento} installation.
** Ensure network connectivity and that any required firewall rules are in place.
** Test basic connectivity: `curl -I https://trento.example.com/mcp-server-trento/mcp`.

. *Authentication Errors*
** Verify that your API token is valid by testing it directly against your {trento} Server API.
** Ensure `TRENTO_PAT` is exported in the same shell session before running `mcphost`.
** Check that the header name matches your server configuration (default: `Authorization`).
** Ensure the token has the necessary permissions in {trento}.

. *LLM Provider Errors*
** Verify that `GOOGLE_API_KEY` (or your provider's API key) is exported correctly.
** Check the `provider-url` and `model` configuration in your `~/.mcphost.yml`.
** Confirm that your API key has sufficient quota and permissions with your provider.

. *General Issues*
** Check the MCPHost terminal output for detailed error messages during startup or operation.
** Review the {trento} MCP Server logs for connection attempts and errors.
** Verify that your configuration file exists at `~/.mcphost.yml` and has correct YAML syntax.
** Refer to the <<sec-trento-mcp-troubleshooting>> for additional help.

==== Additional Resources

* https://github.com/mark3labs/mcphost#configuration-file-support[MCPHost Configuration Documentation] - For comprehensive MCPHost configuration details.
* <<sec-trento-installing-trentoserver>> - For deploying and configuring the MCP Server.
* <<sec-trento-mcp-config>> - For detailed {trento} MCP Server configuration reference.
* https://modelcontextprotocol.io[Model Context Protocol Documentation] - For general MCP information and client compatibility.
