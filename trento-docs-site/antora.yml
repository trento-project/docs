name: ROOT
title: Trento Documentation
version: ~
nav:
- modules/user-guide/nav_user_guide.adoc
- modules/developer/nav_developer.adoc
- modules/api-specification/nav_api_specification.adoc

ext:
  collector:
    ## Remove previous documentation build
    - clean:
        - dir: trento-docs-site/build
    ## Fetch documentation from different trento upstream repositories
    - run:
        ## user facing documentation https://documentation.suse.com/sles-sap/trento/html/SLES-SAP-trento/index.html
        - command: git clone --depth 1 --single-branch https://github.com/SUSE/doc-unversioned trento-docs-site/build/tmp_docs/user-guide
        ## Content of the auto builded components section part of nav_developer.adoc
        - command: git clone --depth 1 --single-branch https://github.com/trento-project/agent trento-docs-site/build/tmp_components/agent
        - command: git clone --depth 1 --single-branch https://github.com/trento-project/ansible trento-docs-site/build/tmp_components/ansible
        - command: git clone --depth 1 --single-branch https://github.com/trento-project/checks trento-docs-site/build/tmp_components/checks
        - command: git clone --depth 1 --single-branch https://github.com/trento-project/continuous-delivery trento-docs-site/build/tmp_components/continuous-delivery
        - command: git clone --depth 1 --single-branch https://github.com/trento-project/contracts trento-docs-site/build/tmp_components/contracts
        - command: git clone --depth 1 --single-branch https://github.com/trento-project/helm-charts trento-docs-site/build/tmp_components/helm-charts
        - command: git clone --depth 1 --single-branch https://github.com/trento-project/mcp-server trento-docs-site/build/tmp_components/mcp-server
        - command: git clone --depth 1 --single-branch https://github.com/trento-project/photofinish trento-docs-site/build/tmp_components/photofinish
        - command: git clone --depth 1 --single-branch https://github.com/trento-project/support trento-docs-site/build/tmp_components/support
        - command: git clone --depth 1 --single-branch https://github.com/trento-project/tlint trento-docs-site/build/tmp_components/tlint
        - command: git clone --depth 1 --single-branch https://github.com/trento-project/wanda trento-docs-site/build/tmp_components/wanda
        - command: git clone --depth 1 --single-branch https://github.com/trento-project/web trento-docs-site/build/tmp_components/web
        - command: git clone --depth 1 --single-branch https://github.com/trento-project/werkzeugkoffer trento-docs-site/build/tmp_components/werkzeugkoffer
        - command: git clone --depth 1 --single-branch https://github.com/trento-project/workbench trento-docs-site/build/tmp_components/workbench

    # Generate navigation for components in nav_developer.adoc
    - run:
      - command: node trento-docs-site/scripts/generate-components.nav.js
    - scan:
      - dir: trento-docs-site/build/gen_navigation
        files: 'nav_components.adoc'
        into: modules/developer/partials
    # Trento official documentation repo https://github.com/SUSE/doc-unversioned
    - scan:
      - dir: trento-docs-site/build/tmp_docs/user-guide/trento/adoc
        files: '**/*.adoc'
        into: modules/user-guide/pages
      - dir: trento-docs-site/build/tmp_docs/user-guide/trento/images/src/png
        files: '**/*.png'
        into: modules/user-guide/images
    - run:
        command: trento-docs-site/scripts/generate-attributes-yaml.sh ./trento-docs-site/build/tmp_docs/user-guide/trento/adoc/generic-attributes.adoc ./trento-docs-site/build/adoc_variables/user-guide/antora.yml
    - scan:
        dir: trento-docs-site/build/adoc_variables/user-guide/
        files: 'antora.yml'
    # Trento upstream projects documentation
    ## Trento docs repo https://github.com/trento-project/docs
    - scan:
      - dir: ./..
        files: 'README.adoc'
        into: modules/developer/pages
      - dir: content
        files: '**/*.adoc'
        into: modules/developer/pages/
      - dir: content/images
        files: '**/*.{png,jpg,jpeg,svg,gif}'
        into: modules/developer/images/images
    ## Trento Agent https://github.com/trento-project/agent
    - scan:
      - dir: trento-docs-site/build/tmp_components/agent
        files: '*.adoc'
        into: modules/agent/pages
      - dir: trento-docs-site/build/tmp_components/agent/docs
        files: ['**/*.adoc', '!README.adoc']
        into: modules/agent/pages
    ## Trento Ansible https://github.com/trento-project/ansible
    - scan:
      - dir: trento-docs-site/build/tmp_components/ansible
        files: '*.adoc'
        into: modules/ansible/pages
      - dir: trento-docs-site/build/tmp_components/ansible/docs
        files: ['**/*.adoc', '!README.adoc']
        into: modules/ansible/pages
    ## Trento Checks https://github.com/trento-project/checks
    - scan:
      - dir: trento-docs-site/build/tmp_components/checks
        files: '*.adoc'
        into: modules/checks/pages
    ## Trento Continuous-delivery https://github.com/trento-project/continuous-delivery  
    - scan:
      - dir: trento-docs-site/build/tmp_components/continuous-delivery
        files: '*.adoc'
        into: modules/continuous-delivery/pages
    ## Trento Contracts https://github.com/trento-project/contracts
    - scan:
      - dir: trento-docs-site/build/tmp_components/contracts
        files: '*.adoc'
        into: modules/contracts/pages
    ## Trento Helm https://github.com/trento-project/helm-charts
    - scan:
      - dir: trento-docs-site/build/tmp_components/helm-charts
        files: '*.adoc'
        into: modules/helm-charts/pages
      - dir: trento-docs-site/build/tmp_components/helm-charts/docs
        files: ['**/*.adoc', '!README.adoc']
        into: modules/helm-charts/pages
    ## Trento MCP Server https://github.com/trento-project/mcp-server/
    - scan:
      - dir: trento-docs-site/build/tmp_components/mcp-server
        files: '*.adoc'
        into: modules/mcp-server/pages
      - dir: trento-docs-site/build/tmp_components/mcp-server/docs
        files: ['**/*.adoc', '!README.adoc']
        into: modules/mcp-server/pages
    ## Trento Photofinish https://github.com/trento-project/photofinish
    - scan:
      - dir: trento-docs-site/build/tmp_components/photofinish
        files: '*.adoc'
        into: modules/photofinish/pages
    ## Trento Support https://github.com/trento-project/support
    - scan:
      - dir: trento-docs-site/build/tmp_components/support
        files: '*.adoc'
        into: modules/support/pages
    ## Trento Tlint https://github.com/trento-project/tlint
    - scan:
      - dir: trento-docs-site/build/tmp_components/tlint
        files: '*.adoc'
        into: modules/tlint/pages
      - dir: trento-docs-site/build/tmp_components/tlint/docs
        files: ['**/*.adoc', '!README.adoc']
        into: modules/tlint/pages
    ## Trento Wanda https://github.com/trento-project/wanda
    - scan:
      - dir: trento-docs-site/build/tmp_components/wanda
        files: '*.adoc'
        into: modules/wanda/pages
      - dir: trento-docs-site/build/tmp_components/wanda/guides
        files: ['**/*.adoc', '!README.adoc']
        into: modules/wanda/pages/
      - dir: trento-docs-site/build/tmp_components/wanda/guides
        files: '**/*.{png,jpg,jpeg,svg,gif}'
        into: modules/wanda/images/
    ## Trento Web https://github.com/trento-project/web
    - scan:
      - dir: trento-docs-site/build/tmp_components/web
        files: '*.adoc'
        into: modules/web/pages
      - dir: trento-docs-site/build/tmp_components/web/guides
        files: ['**/*.adoc', '!README.adoc']
        into: modules/web/pages/
      - dir: trento-docs-site/build/tmp_components/web/guides/images
        files: '**/*.{png,jpg,jpeg,svg,gif}'
        into: modules/web/images/
    ## Trento werkzeugkoffer https://github.com/trento-project/werkzeugkoffer
    - scan:
      - dir: trento-docs-site/build/tmp_components/werkzeugkoffer
        files: 'README.adoc'
        into: modules/werkzeugkoffer/pages
      - dir: trento-docs-site/build/tmp_components/werkzeugkoffer/docs
        files: ['**/*.adoc', '!README.adoc']
        into: modules/werkzeugkoffer/pages
    ## Trento Workbench https://github.com/trento-project/workbench
    - scan:
      - dir: trento-docs-site/build/tmp_components/workbench
        files: '*.adoc'
        into: modules/workbench/pages
      - dir: trento-docs-site/build/tmp_components/workbench
        files: '**/*.{png,jpg,jpeg,svg,gif}'
        into: modules/workbench/images