name: ROOT
title: Trento Documentation
version: ~
nav:
- modules/user-guide/nav_user_guide.adoc
- modules/developer/nav_developer.adoc
- modules/api-specification/nav_api_specification.adoc

ext:
  collector:
    ## Remove previous documentation
    - clean:
        - dir: trento-docs-site/trento-docs-site-public
        - dir: trento-docs-site/tmp_docs
    ## Fetch documentation from diffrent upstream repositories
    - run:
        - command: git clone --depth 1 https://github.com/SUSE/doc-unversioned trento-docs-site/tmp_docs/user-guide
        - command: git clone --depth 1 https://github.com/trento-project/web.git trento-docs-site/tmp_docs/web
        - command: git clone --depth 1 https://github.com/trento-project/agent trento-docs-site/tmp_docs/agent
        - command: git clone --depth 1 https://github.com/trento-project/helm-charts trento-docs-site/tmp_docs/helm-charts
        - command: git clone --depth 1 https://github.com/trento-project/ansible trento-docs-site/tmp_docs/ansible
        - command: git clone --depth 1 https://github.com/trento-project/checks trento-docs-site/tmp_docs/checks
        - command: git clone --depth 1 https://github.com/trento-project/workbench.git trento-docs-site/tmp_docs/workbench
        - command: git clone --depth 1 https://github.com/trento-project/contracts trento-docs-site/tmp_docs/contracts
        - command: git clone --depth 1 https://github.com/trento-project/tlint.git trento-docs-site/tmp_docs/tlint
        - command: git clone --depth 1 https://github.com/trento-project/wanda.git trento-docs-site/tmp_docs/wanda
        - command: git clone --depth 1 https://github.com/trento-project/photofinish.git trento-docs-site/tmp_docs/photofinish
        - command: git clone --depth 1 https://github.com/trento-project/support.git trento-docs-site/tmp_docs/support
        - command: git clone --depth 1 https://github.com/trento-project/continuous-delivery.git trento-docs-site/tmp_docs/continuous-delivery
        - command: git clone --depth 1 https://github.com/trento-project/werkzeugkoffer.git trento-docs-site/tmp_docs/werkzeugkoffer
        - command: git clone --depth 1 https://github.com/trento-project/mcp-server.git trento-docs-site/tmp_docs/mcp-server

    # Trento official documentation repo https://github.com/SUSE/doc-unversioned
    - scan:
      - dir: trento-docs-site/tmp_docs/user-guide/trento/adoc
        files: '**/*.adoc'
        into: modules/user-guide/pages
      - dir: trento-docs-site/tmp_docs/user-guide/trento/images/src/png
        files: '**/*.png'
        into: modules/user-guide/images
    - run:
        command: trento-docs-site/scripts/generate-attributes-yaml.sh ./trento-docs-site/tmp_docs/user-guide/trento/adoc/generic-attributes.adoc ./trento-docs-site/tmp_docs/user-guide/antora_tmp/antora.yml
    - scan:
        dir: trento-docs-site/tmp_docs/user-guide/antora_tmp
        files: 'antora.yml'
    # Trento upstream projects documentation
    ## Trento docs repo https://github.com/trento-project/docs
    - scan:
      - dir: ./../
        files: 'README.adoc'
        into: modules/developer/pages
      - dir:  content/
        files: '**/*.adoc'
        into: modules/developer/pages/
      - dir: content/images/
        files: '**/*.{png,jpg,jpeg,svg,gif}'
        into: modules/developer/images/images
    ## Trento Web https://github.com/trento-project/web
    - scan:
      - dir: trento-docs-site/tmp_docs/web/
        files: '*.adoc'
        into: modules/web/pages
      - dir: trento-docs-site/tmp_docs/web/guides
        files: '**/*.adoc'
        into: modules/web/pages/
      - dir: trento-docs-site/tmp_docs/web/guides/
        files: '**/*.{png,jpg,jpeg,svg,gif}'
        into: modules/web/images/
    ## Trento Agent https://github.com/trento-project/agent
    - scan:
      - dir: trento-docs-site/tmp_docs/agent/
        files: '*.adoc'
        into: modules/agent/pages
      - dir: trento-docs-site/tmp_docs/agent/docs
        files: '**/*.adoc'
        into: modules/agent/pages
    ## Trento Helm https://github.com/trento-project/helm-charts
    - scan:
      - dir: trento-docs-site/tmp_docs/helm-charts/
        files: '*.adoc'
        into: modules/helm-charts/pages
      - dir: trento-docs-site/tmp_docs/helm-charts/docs
        files: '**/*.adoc'
        into: modules/helm-charts/pages
    ## Trento Ansible https://github.com/trento-project/ansible
    - scan:
      - dir: trento-docs-site/tmp_docs/ansible
        files: '*.adoc'
        into: modules/ansible/pages
    ## Trento Checks https://github.com/trento-project/checks
    - scan:
      - dir: trento-docs-site/tmp_docs/checks
        files: '*.adoc'
        into: modules/checks/pages
    ## Trento Workbench https://github.com/trento-project/workbench
    - scan:
      - dir: trento-docs-site/tmp_docs/workbench
        files: '*.adoc'
        into: modules/workbench/pages
      - dir: trento-docs-site/tmp_docs/workbench
        files: '**/*.{png,jpg,jpeg,svg,gif}'
        into: modules/workbench/images
    ## Trento Contracts https://github.com/trento-project/contracts
    - scan:
      - dir: trento-docs-site/tmp_docs/contracts
        files: '*.adoc'
        into: modules/contracts/pages
    ## Trento Tlint https://github.com/trento-project/tlint
    - scan:
      - dir: trento-docs-site/tmp_docs/tlint/
        files: 'README.adoc'
        into: modules/tlint/pages
      - dir: trento-docs-site/tmp_docs/tlint/www/
        files: '*.adoc'
        into: modules/tlint/pages/www/ 
    ## Trento Wanda https://github.com/trento-project/wanda
    - scan:
      - dir: trento-docs-site/tmp_docs/wanda/
        files: '*.adoc'
        into: modules/wanda/pages
      - dir: trento-docs-site/tmp_docs/wanda/guides
        files: '**/*.adoc'
        into: modules/wanda/pages/
      - dir: trento-docs-site/tmp_docs/wanda/guides/
        files: '**/*.{png,jpg,jpeg,svg,gif}'
        into: modules/wanda/images/
    ## Trento Photofinish https://github.com/trento-project/photofinish
    - scan:
      - dir: trento-docs-site/tmp_docs/photofinish
        files: '*.adoc'
        into: modules/photofinish/pages
    ## Trento Support https://github.com/trento-project/support
    - scan:
      - dir: trento-docs-site/tmp_docs/support
        files: '*.adoc'
        into: modules/support/pages
    ## Trento Continuous-delivery https://github.com/trento-project/continuous-delivery  
    - scan:
      - dir: trento-docs-site/tmp_docs/continuous-delivery
        files: '*.adoc'
        into: modules/continuous-delivery/pages
    ## Trento werkzeugkoffer https://github.com/trento-project/werkzeugkoffer
    - scan:
      - dir: trento-docs-site/tmp_docs/werkzeugkoffer/
        files: 'README.adoc'
        into: modules/werkzeugkoffer/pages
      - dir: trento-docs-site/tmp_docs/werkzeugkoffer/demo-idp/
        files: 'README.adoc'
        into: modules/werkzeugkoffer/pages/demo_idp/
    ## Trento MCP Server https://github.com/trento-project/mcp-server/
    - scan:
      - dir: trento-docs-site/tmp_docs/mcp-server/
        files: '*.adoc'
        into: modules/mcp-server/pages
      - dir: trento-docs-site/tmp_docs/mcp-server/docs/
        files: '**/*.adoc'
        into: modules/mcp-server/pages/docs